@model MyCarApp.BE.BussinessEntities.Car

@{
    ViewBag.Title = "CarDetails";
}
<style>
    .checked {
        color: orange;
    }
</style>
@Styles.Render("~/Content/Index.css")
<div class="breadcrumb-option">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__links">
                    <a href="/User/index"><i class="fa fa-home" style="padding-right: 5px;"></i>Home</a>
                    <a href="#">Car Details</a>
                    <span>@Model.Name</span>
                </div>
            </div>
        </div>
    </div>
</div>
<center>
    @if (Model.CarCategory.Category == "Rent")
    {
        <h3><b>Rent Car</b></h3>
    }
    else if (Model.CarCategory.Category == "Used")
    {
        <h3><b>Used Car</b></h3>
    }
    else if (Model.CarCategory.Category == "New")
    {
        <h3><b>New Car</b></h3>
    }
</center>
<div class="row">
    <div class="col-md-4">
        <div class="chart-card">
            <div class="chart-text">
                @Html.DisplayFor(model => model.Name)
            </div>
            <img src="~/Uploads/CarsImages/@Model.Image" style="height: 200px; width: 300px; object-fit: cover;padding-top: 10px;" />
            <div class="user-details" style="font-size:15px">
                <p>@Html.DisplayFor(model => model.Brand)</p>
                <p>@Html.DisplayFor(model => model.ShortDescription)</p>
                <p>@Html.DisplayFor(model => model.LongDescription)</p>
                @if (Model.Kilometers > 0)
                {
                    <p><strong>@Html.DisplayNameFor(model => model.Kilometers)</strong>:  @Html.DisplayFor(model => model.Kilometers)</p>
                }

            </div>
        </div>

    </div>
    <div class="col-md-8">
        <div class="user-card">
            <div class="row">
                @foreach (var item in Model.CarVarients)
                {
                    <div class="col-md-3">
                        <div class="card1 text-center">
                            <div class="card-block">
                                <img src="~/Uploads/CarsImages/@item.Image" class="img-thumbnail" style="height:150px" />
                                <div class="card-title">
                                    <h4>@item.Name</h4>
                                </div>
                                @if (Model.CarCategory.Category == "Rent")
                                {
                                    <div class="card-text">&#8377; @Math.Round(item.Price, 2)/Day</div>
                                }
                                else
                                {
                                    <div class="card-text">&#8377; @Math.Round(item.Price, 2)</div>
                                }

                                @if (Model.CarCategory.Category == "Rent")
                                {
                                    if (Session["token"] != null)
                                    {
                                        <form action="/User/RentCarByCity" method="post">
                                            <input type="hidden" name="varientId" value="@item.Id" />
                                            <input type="hidden" name="carId" value="@Model.Id" />
                                            <input type="hidden" name="price" value="@item.Price" />
                                            <input style="margin-top:10px; margin-bottom:10px;" type="submit" class="btn btn-success" value="Rent Car" />
                                        </form>
                                    }
                                    else
                                    {
                                        <a data-toggle="modal" style="margin-top:10px; margin-bottom:10px;" data-target="#myModal" class="btn btn-success">Rent Car</a>
                                    }
                                }
                                else
                                {
                                    if (Session["token"] != null)
                                    {
                                        <form action="/User/PurchaseCar" method="post">
                                            <input type="hidden" name="varientId" value="@item.Id" />
                                            <input type="hidden" name="carId" value="@Model.Id" />
                                            <input type="hidden" name="price" value="@item.Price" />
                                            <input style="margin-top:10px; margin-bottom:10px;" type="submit" class="btn btn-success" value="Buy Car" />
                                        </form>
                                    }
                                    else
                                    {
                                        <a data-toggle="modal" style="margin-top:10px; margin-bottom:10px;" data-target="#myModal" class="btn btn-success">Buy Car</a>
                                    }
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="container11">
    <h1 id="Indexheading">Reviews</h1>
    @if (Session["token"] != null)
    {
        <a data-toggle="modal" style="margin-top:10px; margin-bottom:10px;" data-target="#reviewModel" class="btn btn-success">Add Review</a>
    }
    else
    {
        <a data-toggle="modal" style="margin-top:10px; margin-bottom:10px;" data-target="#myModal" class="btn btn-success">Add Review</a>
    }
    @if (Model.Reviews.Count > 0)
    {
        <div class="row">
            <div class="MultiCarousel" data-items="1,3,5,6" data-slide="1" id="MultiCarousel" data-interval="1000">
                <div class="MultiCarousel-inner">
                    @foreach (var item in Model.Reviews)
                    {
                        <div class="item">
                            <div class="card1 text-center">
                                <div class="card-block1" style="border-radius: 10px; padding: 10px; width: auto;">

                                    <div class="card-title">
                                        <h4>@item.Title</h4>
                                    </div>
                                    @for (int index = 1; index <= 5; index++)
                                    {
                                        if (index <= item.Rating)
                                        {
                                            <span class="fa fa-star checked"></span>
                                        }
                                        else
                                        {
                                            <span class="fa fa-star"></span>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <button class="btn btn-primary leftLst"><</button>
                <button class="btn btn-primary rightLst">></button>
            </div>
        </div>
    }
</div>
@Styles.Render("~/Content/rating.css")
<div class="modal fade" id="reviewModel" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add Review</h4>
            </div>
            <div class="modal-body">
                <form action="/User/AddReview" method="post">
                    <div class="form-group">
                        <input type="hidden" name="carId" class="form-control" value="@Model.Id" />

                        <div class="rating">
                            <input type="radio" name="rating" value="5" id="5"><label for="5">☆</label> <input type="radio" name="rating" value="4" id="4"><label for="4">☆</label> <input type="radio" name="rating" value="3" id="3"><label for="3">☆</label> <input type="radio" name="rating" value="2" id="2"><label for="2">☆</label> <input type="radio" name="rating" value="1" id="1"><label for="1">☆</label>
                        </div>
                        <br /><input type="text" name="ratingTitle" class="form-control" placeholder="Title" />
                        <br /><input type="text" name="ratingDiscription" required class="form-control" placeholder="Description" />
                        <br /><input type="submit" class="btn btn-success form-control" value="Add a review" />
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<br />

